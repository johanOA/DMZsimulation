FROM node:20.12.2-alpine AS buil

#Directorio de trabajo
WORKDIR /FRONT

# Copia los json 
COPY package*.json ./

#Instalacion de dependecias
RUN npm install

#copia todo el codigo
COPY . .

#Contruye el proyecto 
RUN npm run buil

# Etapa 2: Configuraci칩n del servidor para servir la aplicaci칩n
# Utiliza una imagen base de Nginx para servir la aplicaci칩n est치tica

FROM nginx:stable-alpine

#copia los archivos estaticos de la etapa anterior al directori de Nginx
COPY --from=buil /app/build /usr/share/nginx/html

EXPOSE 81

#Inicia el servidor de Nginx
CMD [ "nginx", "-g", "daemon off;" ]
